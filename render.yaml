services:
  - type: web
    name: homework-forwarder
    env: python
    buildCommand: |
      mkdir -p /usr/share/tesseract-ocr/4.00/tessdata  # <-- Creates directory
      curl -L "https://github.com/tesseract-ocr/tessdata/raw/main/dzo.traineddata" -o "/usr/share/tesseract-ocr/4.00/tessdata/dzo.traineddata"
      apt-get update
      apt-get install -y tesseract-ocr tesseract-ocr-dzo ffmpeg
      pip install -r requirements.txt
    startCommand: python main.py
    envVars:
      - key: BOT_TOKEN
        sync: false
      - key: ADMIN_CHAT_IDS
        sync: false
      - key: ROUTES_MAP
        sync: false
      - key: WEBHOOK_URL
        sync: false
